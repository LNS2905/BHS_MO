import{c as ke,p as Ie,a as ce,u as le,r as o,b as oe,j as e,P as F,d as a,B as p,T as l,e as I,F as O,x as Pe,m as Te,f as J,g as Fe,I as G,h as M,C as ze,S as Be,i as Le,k,l as R,n as pe,o as ge,q as Ee,s as xe,t as Oe,v as Z,w as Me,M as Re,y as fe,R as ie,A as je,z as $e,D as qe,Z as He,E as We,G as B,H as Ue}from"./vendor.90091974.module.js";const _e={title:"BachHoaSi",headerColor:"",textColor:"white",statusBarColor:"#EF1724",leftButton:"none",textAlign:"left",actionBarHidden:!1,hideAndroidBottomNavigationBar:!1,hideIOSSafeAreaBottom:!1,selfControlLoading:!1,statusBar:"normal"},Ge=!1,Ve=[],Ye=[],Xe=[],Qe=[],Je={primaryColor:"",searchBar:!0,orderValue:"500000",oaIDtoOpenChat:"3845899341339907617",shippingFee:"30000"};var V={app:_e,debug:Ge,listCSS:Ve,listSyncJS:Ye,listAsyncJS:Xe,pages:Qe,template:Je};const P=ke()(Ie((r,s)=>({store:null,products:[],cart:{id:0,createdDate:new Date().toISOString(),updatedDate:new Date().toISOString(),items:[]},header:{},searchProduct:"",activeCate:0,activeFilter:"az",storeProductResult:[],openProductPicker:!1,setOpenProductPicker:t=>r({openProductPicker:t}),productInfoPicked:{productId:-1,isUpdate:!1},setProductInfoPicked:t=>r({productInfoPicked:t}),email:"",password:"",phoneNumber:"",name:"",username:"",locationSignup:"",order:null,storeDetails:null,setStoreDetails:t=>r({storeDetails:t}),menu:[],setMenu:t=>r({menu:t}),paginationResponse:null,responseObject:null,setHeader:t=>r(n=>({header:{...n.header,...t}})),setEmail:t=>r({email:t}),setPassword:t=>r({password:t}),setPhoneNumber:t=>r({phoneNumber:t}),setName:t=>r({name:t}),setUsername:t=>r({username:t}),setLocationSignup:t=>r({locationSignup:t}),location:"",clearTokens:()=>r({accessToken:null,refreshToken:null}),setLocation:t=>r({location:t}),loginResponse:null,setLoginResponse:t=>r({loginResponse:t}),setStoreProductResult:t=>r({storeProductResult:t}),fetchCart:async()=>{const t=s().cartId;if(!t){console.error("Cart ID not found in Zustand!");return}try{const n=await L.get("/carts/items",{params:{page:0,size:100,cartId:parseInt(t)}});n.data.isSuccess?r({cart:{...s().cart,items:n.data.data.content}}):console.error("Failed to fetch cart:",n.data.message)}catch(n){console.error("Error fetching cart:",n)}},accessToken:null,refreshToken:null,storeId:null,cartId:null,isLoggedIn:!1,setAccessToken:t=>r({accessToken:t}),setRefreshToken:t=>r({refreshToken:t}),setStoreId:t=>r({storeId:t}),setCartId:t=>r({cartId:t}),setIsLoggedIn:t=>r({isLoggedIn:t}),logout:()=>r({accessToken:null,refreshToken:null,storeId:null,cartId:null,isLoggedIn:!1}),fetchNewCart:async t=>{try{const n=await L.get("/carts",{params:{storeId:t}});n.data.isSuccess?r({cartId:n.data.data.cartId.toString()}):console.error("Failed to fetch new cart:",n.data.message)}catch(n){console.error("Error fetching new cart:",n)}}}),{name:"app-storage",serialize:r=>{const s=new WeakSet;return JSON.stringify(r,(t,n)=>{if(typeof n=="object"&&n!==null){if(s.has(n))return;s.add(n)}if(!(n&&n.$$typeof&&n._owner)&&!(t==="_context"||t.startsWith("__react")))return n})},deserialize:r=>JSON.parse(r),getStorage:()=>localStorage})),L=ce.create({baseURL:"https://api-user.fams.college/api/v1"});L.interceptors.request.use(r=>{const{accessToken:s}=P.getState();return s&&!r.url?.includes("/auth/")&&(r.headers.Authorization=`Bearer ${s}`),r.headers["Content-Type"]="application/json",r});const Ze=()=>{const{orderId:r}=le(),[s,t]=o.exports.useState(null),[n,u]=o.exports.useState(0);P(h=>h);const{openSnackbar:c}=oe();o.exports.useEffect(()=>{i()},[r]);const i=async()=>{try{const h=await L.get("/orders/details",{params:{page:0,size:10,orderId:r}});h.data.isSuccess?(t(h.data.data),m(h.data.data.content),c({text:"Order details fetched successfully",type:"success"})):(console.error("Error fetching order details:",h.data.message),c({text:`Error: ${h.data.message}`,type:"error"}))}catch(h){console.error("Error fetching order details:",h),c({text:"Failed to fetch order details",type:"error"})}},m=h=>{const y=h.reduce((D,S)=>D+S.product.price*S.quantity,0);u(y)};return e(F,{children:a(p,{p:4,children:[e(l,{bold:!0,size:"large",className:"mb-4",children:"Chi ti\u1EBFt \u0111\u01A1n h\xE0ng"}),s?.content.map(h=>a(p,{className:"mb-4 p-3 border rounded flex",children:[e("img",{src:h.product.product.urlImage,alt:h.product.product.name,width:120,height:80,className:"mr-3"}),a(p,{style:{marginLeft:"10px"},children:[e(l,{bold:!0,children:h.product.product.name}),a(l,{children:["S\u1ED1 l\u01B0\u1EE3ng: ",h.quantity]}),a(l,{children:["Gi\xE1: ",h.product.price.toLocaleString()," \u0111"]}),a(l,{children:["T\u1ED5ng: ",(h.product.price*h.quantity).toLocaleString()," \u0111"]})]})]},h.id)),e(p,{className:"mt-4 p-3 border rounded",children:a(l,{bold:!0,size:"large",children:["T\u1ED5ng ti\u1EC1n \u0111\u01A1n h\xE0ng: ",n.toLocaleString()," \u0111"]})})]})})},j=ce.create({baseURL:"https://api-shipper.fams.college/api/v1"});j.interceptors.request.use(r=>{const{accessToken:s}=P.getState();return s&&!r.url?.includes("/auth/")&&(r.headers.Authorization=`Bearer ${s}`),r.headers["Content-Type"]="application/json",r});const Ke=()=>{const{orderId:r}=le(),[s,t]=o.exports.useState(null),{accessToken:n}=P(i=>i),{openSnackbar:u}=oe();o.exports.useEffect(()=>{c()},[r]);const c=async()=>{try{const i=await j.get(`/order/${r}`,{headers:{Authorization:`Bearer ${n}`}});i.data.isSuccess?(t(i.data.data),u({text:"Order details fetched successfully",type:"success"})):(console.error("Error fetching order details:",i.data.message),u({text:`Error: ${i.data.message}`,type:"error"}))}catch(i){console.error("Error fetching order details:",i),u({text:"Failed to fetch order details",type:"error"})}};return s?e(F,{children:a(p,{p:4,children:[e(l,{bold:!0,size:"large",className:"mb-4",children:"Chi ti\u1EBFt \u0111\u01A1n h\xE0ng"}),a(p,{className:"mb-4",children:[e(l,{bold:!0,size:"small",className:"mb-1",children:"M\xE3 \u0111\u01A1n h\xE0ng"}),e(l,{children:s.orderId})]}),a(p,{className:"mb-4",children:[e(l,{bold:!0,size:"small",className:"mb-1",children:"T\xEAn c\u1EEDa h\xE0ng"}),e(l,{children:s.storeName})]}),a(p,{className:"mb-4",children:[e(l,{bold:!0,size:"small",className:"mb-1",children:"Tr\u1EA1ng th\xE1i \u0111\u01A1n h\xE0ng"}),e(l,{children:s.orderStatus})]}),a(p,{className:"mb-4",children:[e(l,{bold:!0,size:"small",className:"mb-1",children:"T\u1ED5ng s\u1ED1 s\u1EA3n ph\u1EA9m"}),e(l,{children:s.total})]}),a(p,{className:"mb-4",children:[e(l,{bold:!0,size:"small",className:"mb-1",children:"Ng\xE0y t\u1EA1o \u0111\u01A1n"}),e(l,{children:s.createdAt})]}),a(p,{className:"mb-4",children:[e(l,{bold:!0,size:"small",className:"mb-1",children:"Th\u1EDDi gian giao h\xE0ng"}),e(l,{children:s.deliveryTime||"Ch\u01B0a c\xF3"})]}),a(p,{className:"mb-4",children:[e(l,{bold:!0,size:"small",className:"mb-1",children:"Ph\u1EA3n h\u1ED3i"}),e(l,{children:s.feedback||"Ch\u01B0a c\xF3"})]}),a(p,{className:"mb-4",children:[e(l,{bold:!0,size:"small",className:"mb-1",children:"Th\xF4ng tin li\xEAn h\u1EC7"}),a(l,{children:[s.buildingNumber,", ",s.street]}),e(l,{children:s.phoneNumber})]}),a(p,{className:"mb-4",children:[e(l,{bold:!0,size:"small",className:"mb-1",children:"Ph\u01B0\u01A1ng th\u1EE9c thanh to\xE1n"}),e(l,{children:s.paymentMethod})]}),a(p,{className:"mb-4",children:[e(l,{bold:!0,size:"small",className:"mb-1",children:"T\u1ED5ng ti\u1EC1n"}),e(l,{children:s.grandTotal})]}),a(p,{className:"mb-4",children:[e(l,{bold:!0,size:"small",className:"mb-1",children:"Danh s\xE1ch s\u1EA3n ph\u1EA9m"}),s.orderProductMenu.map(i=>a(p,{className:"mb-2",children:[e("img",{src:i.url,alt:i.productName,className:"w-20 h-20 object-cover rounded-lg mr-2"}),a("div",{children:[e(l,{bold:!0,children:i.productName}),a(l,{children:["S\u1ED1 l\u01B0\u1EE3ng: ",i.quantity]}),a(l,{children:["Gi\xE1: ",i.price?i.price.toLocaleString():"0"," \u0111"]}),a(l,{children:["Danh m\u1EE5c: ",i.category]})]})]},i.id))]})]})}):e(F,{children:"Loading..."})},K=(...r)=>r.filter(s=>!!s).join(" "),$=r=>Math.round(Number(r)).toLocaleString(),et=(r,s=void 0)=>{if(!!r){var t=r.replace("#","");t=t.match(new RegExp("(.{"+t.length/3+"})","g"));for(var n=0;n<t.length;n++)t[n]=parseInt(t[n].length==1?t[n]+t[n]:t[n],16);return typeof s!="undefined"&&t.push(s),t.join(", ")}},tt=(r,s)=>Math.floor((1-Number(r)/Number(s))*100),de=o.exports.forwardRef((r,s)=>{const{children:t,listBtn:n,hidden:u,zIndex:c}=r;return a(p,{m:0,p:4,className:K("bg-white fixed bottom-0 left-0 right-0 shadow-btn-fixed",c?`z-[${c}]`:"z-[99999]",u&&"anime-move-down"),ref:s,children:[t&&e(p,{m:0,children:t}),e(p,{m:0,flex:!0,className:"gap-4",children:n?.map(i=>e(I,{fullWidth:!0,variant:i.type,size:"large",onClick:i.onClick,className:i.className,children:i.content},i.id))})]})}),be=({handleOnClick:r})=>{const{cart:s}=P(u=>u),{quantity:t,totalPrice:n}=o.exports.useMemo(()=>s.items.reduce((u,c)=>(u.quantity+=1,u.totalPrice+=(c.product.price||0)*c.quantity,u),{quantity:0,totalPrice:0}),[s.items]);return t===0?null:a("div",{className:"text-base mx-2 px-4 py-3 flex items-center justify-between bg-gray-300 rounded-primary fixed bottom-[88px] left-0 right-0 z-50 anime-fade",onClick:r,role:"button",children:[e("div",{className:"font-medium",children:"\u0110\u01A1n h\xE0ng"}),a(p,{m:0,flex:!0,justifyContent:"space-around",alignItems:"center",children:[a("div",{children:[t," m\xF3n"]}),e("div",{className:"w-1 h-1 bg-black rounded-lg mx-3"}),e("div",{children:$(n)})]})]})},q=()=>{const{setHeader:r}=P(s=>({setHeader:s.setHeader}));return o.exports.useCallback(({route:s="",hasLeftIcon:t=!0,rightIcon:n=null,title:u=V.app.title,customTitle:c=null,type:i="primary"})=>r({route:s,hasLeftIcon:t,rightIcon:n,title:u,customTitle:c,type:i}),[r])};function X(r){return r(V)}const rt=({children:r,cssVariables:s})=>(o.exports.useEffect(()=>(Object.keys(s).filter(t=>s[t]).forEach(t=>{document.documentElement.style.setProperty(`${t}`,s[t])}),()=>{Object.keys(s).forEach(t=>{document.documentElement.style.removeProperty(`${t}`)})}),[s]),e(O,{children:r})),at=(r,s)=>new Promise((t,n)=>{Pe.createOrder({desc:s??`Thanh to\xE1n cho ${V.app.title}`,item:[],amount:r+Number(X(u=>u.template.shippingFee)),success:u=>{console.log("success: ",u),t(u)},fail:u=>{console.log("err: ",u),n(u)}})}),st={primary:V.template.primaryColor||V.app.statusBarColor,secondary:"#FFFFFF"},nt={primary:V.app.textColor,secondary:"black"},H=r=>{r||(r="primary"),Te({color:"",statusBarColor:st[r],textColor:nt[r]})},ct=()=>{const{menu:r,cart:s,setOpenProductPicker:t,setProductInfoPicked:n}=P(g=>g),u=J(),{productId:c}=le(),i=q(),m=o.exports.useMemo(()=>r.find(g=>g.id===Number(c)),[c,r]),h=o.exports.useMemo(()=>{if(m&&m.price&&m.product.basePrice)return tt(m.price,m.product.basePrice)},[m]),y=o.exports.useMemo(()=>({id:1,content:"Th\xEAm v\xE0o gi\u1ECF",type:"primary",onClick:()=>{t(!0),n({productId:Number(c),isUpdate:!1})}}),[c,t,n]),D=o.exports.useMemo(()=>({id:2,content:"Thanh to\xE1n",type:"secondary",onClick:()=>{u("/finish-order")}}),[u]),S=o.exports.useMemo(()=>s.items.length>0?[D,y]:[y],[s.items.length,y,D]);return o.exports.useEffect(()=>{i({title:"",rightIcon:e("div",{onClick:()=>Fe({type:"zmp",data:{path:"/",title:m?.product.name,description:m?.product.description?.slice(0,100),thumbnail:m?.product.urlImage}}),children:e(G,{icon:"zi-share-external-1"})})}),H()},[m,i]),m?a(F,{children:[a("div",{className:"relative bg-white w-full",style:{paddingBottom:s.items.length>0?"120px":"80px"},children:[e("img",{src:m.product.urlImage,alt:"",className:"w-full h-auto"}),h&&a("div",{className:"absolute top-2.5 right-2.5 text-white font-medium text-sm px-2 py-1 bg-[#FF9743] w-auto h-auto rounded-lg",children:["-",h,"%"]}),a(p,{m:0,p:4,className:"border-b",children:[e(l.Title,{className:"text-lg",children:m.product.name}),a(l.Title,{className:"pt-1 font-semibold text-base text-primary",children:[e("span",{className:"font-normal text-xs text-primary",children:"\u0111"}),$(m.price)]}),a(l,{className:"pl-2 pt-1 font-medium text-sm text-zinc-400 line-through",children:["\u0111",$(m.product.basePrice)]})]}),e(p,{m:0,px:4,py:5,className:"text-justify break-words whitespace-pre-line",children:m.product.description})]}),s.items.length>0&&e(be,{quantity:s.items.length,totalPrice:s.items.reduce((g,C)=>g+C.product.price*C.quantity,0),handleOnClick:()=>u("/finish-order")}),e(de,{listBtn:S})]}):e(F,{children:"Product not found"})},ue=({src:r,alt:s,className:t,ratio:n,...u})=>{const c=`${1/n*100}%`;return e("div",{className:K("w-full relative",t),style:{paddingTop:c},children:e("img",{src:r,alt:s,...u,className:"w-full absolute top-0 left-0 h-full object-cover"})})},lt=({id:r,pathImg:s,nameProduct:t,salePrice:n,quantity:u,handleOnClick:c})=>a("div",{className:"w-full flex flex-row items-center justify-between gap-1 border border-[#E4E8EC] rounded-lg overflow-hidden h-24 p-2 mt-2 bg-white",onClick:()=>c(r),role:"button",children:[a("div",{className:"flex flex-row items-center gap-1",children:[e("div",{className:"flex-none w-20 rounded-lg overflow-hidden",children:e(ue,{src:s,alt:"image product",ratio:1})}),e(p,{p:0,m:0,className:" flex-none relative w-5 h-5 rounded-full bg-slate-100",children:e("div",{className:" absolute top-1/2 -translate-y-1/2 w-full text-center text-xs text-blue-700 ",children:u})}),e(p,{m:0,className:"flex-none text-slate-500",children:"x"}),e("div",{children:e("div",{className:"line-clamp-2 text-sm break-words",children:t})})]}),a("span",{className:" pt-1 font-semibold text-sm",children:[e("span",{className:" font-normal text-xs",children:"\u0111"}),$(n*u)]})]}),ot=({store:r,type:s="standard",handleOnClick:t=()=>{},hasRightSide:n=!0,hasBorderBottom:u=!0,customRightSide:c,className:i})=>a("div",{className:K("flex flex-row items-center justify-between w-full",u&&" border-b",i&&i),onClick:t,role:"button",children:[a("div",{className:"flex flex-row items-center",children:[e("div",{className:"w-auto flex-none",children:e("img",{src:"https://mms.img.susercontent.com/25b7e43f3c5985a5773c430213155c4c",alt:"product",className:" w-9 h-9 object-cover rounded-full bg-white"})}),e("div",{className:" p-3 pr-0",children:e("div",{className:"line-clamp-2 text-sm font-medium break-words",children:"B\xE1ch H\xF3a S\u1EC9"})})]}),n&&(c||e(G,{size:20,icon:"zi-chevron-right",className:" text-zinc-500"}))]}),it=()=>{const{cart:r,store:s,setOpenProductPicker:t,setProductInfoPicked:n,fetchCart:u,storeId:c,cartId:i,fetchNewCart:m}=P(b=>b),[h,y]=o.exports.useState(""),D=Number(X(b=>b.template.shippingFee)),S=M(),g=q(),{totalQuantity:C,totalPrice:E}=o.exports.useMemo(()=>r.items.reduce((b,A)=>(b.totalQuantity+=1,b.totalPrice+=(A.product.price||0)*A.quantity,b),{totalQuantity:0,totalPrice:0}),[r.items]),x=async b=>{b.preventDefault();try{await at(E)&&(await f("BANKING"),await m(c),S("/order-success"))}catch(A){console.error("Payment failed:",A)}},w=b=>{t(!0),n({productId:b,isUpdate:!0})},z=async b=>{b.preventDefault();try{await f("COD"),await m(c),S("/order-success")}catch(A){console.error("COD order failed:",A)}},f=async b=>{try{const A=await L.post("/orders",{storeId:c,cartId:i,payingMethod:b,deliveryTime:h});if(A.data.isSuccess)console.log("Order placed successfully:",A.data);else throw new Error(A.data.message)}catch(A){throw console.error("Error placing order:",A),A}},d=b=>{y(b.format("YYYY-MM-DDTHH:mm:ss.SSS[Z]"))};return o.exports.useEffect(()=>{g({title:"\u0110\u01A1n \u0111\u1EB7t h\xE0ng",type:"secondary"}),H("secondary"),u()},[]),a(F,{children:[r&&a("div",{className:"mb-[80px]",children:[e(p,{m:0,p:4,className:"bg-white",children:e(ot,{store:s,hasRightSide:!1,hasBorderBottom:!1,type:"order"})}),e(p,{mx:3,mb:2,children:r.items.map(b=>e(lt,{pathImg:b.product.product.urlImage,nameProduct:b.product.product.name,salePrice:b.product.price,quantity:b.quantity,id:b.product.id,handleOnClick:A=>w(A)},b.id))}),a(p,{m:4,flex:!0,flexDirection:"row",justifyContent:"space-between",children:[e("span",{className:"text-base font-medium",children:"\u0110\u01A1n h\xE0ng"}),a("span",{className:"text-base font-medium text-primary",children:[$(E),"\u0111"]})]}),a(p,{m:0,px:4,className:"bg-white",children:[e(l,{size:"large",bold:!0,className:"border-b py-3 mb-0",children:"Th\u1EDDi gian giao h\xE0ng"}),e("div",{className:"py-3",children:e("div",{style:{border:"1px solid #d9d9d9",borderRadius:"2px"},children:e(ze,{fullscreen:!1,onPanelChange:(b,A)=>{console.log(b.format("YYYY-MM-DD"),A),d(b)}})})})]}),D>0&&a(p,{m:4,flex:!0,flexDirection:"row",justifyContent:"space-between",children:[e("span",{className:"text-base font-medium",children:"Ph\xED ship"}),a("span",{className:"text-base font-medium text-primary",children:[$(D),"\u0111"]})]}),e(l,{className:"p-4 text-center",children:`\u0110\u1EB7t h\xE0ng \u0111\u1ED3ng ngh\u0129a v\u1EDBi vi\u1EC7c b\u1EA1n \u0111\u1ED3ng \xFD quan t\xE2m
              B\xE1ch H\xF3a S\u1EC9
              \u0111\u1EC3 nh\u1EADn tin t\u1EE9c m\u1EDBi`})]}),a(de,{zIndex:99,children:[e(I,{htmlType:"submit",fullWidth:!0,style:{marginBottom:"10px"},className:"bg-primary text-white rounded-lg h-12",onClick:z,children:"Thanh to\xE1n COD"}),e(I,{htmlType:"submit",fullWidth:!0,className:"bg-primary text-white rounded-lg h-12",onClick:x,children:"Thanh to\xE1n banking"})]})]})},Ne=()=>{const{openProductPicker:r,setOpenProductPicker:s,productInfoPicked:t,setProductInfoPicked:n,menu:u,cart:c,fetchCart:i,cartId:m,storeId:h}=P(d=>d),[y,D]=o.exports.useState(1),S=M(),g=o.exports.useMemo(()=>t.productId!==-1?u.find(d=>d.id===t.productId):null,[t.productId,u]),C=o.exports.useMemo(()=>g?c.items.find(d=>d.product.id===g.id):null,[g,c]);o.exports.useEffect(()=>{D(g&&C?C.quantity:1)},[g,C]);const E=o.exports.useCallback(()=>{s(!1),n({productId:-1,isUpdate:!1})},[s,n]),x=o.exports.useCallback(async()=>{if(!(!g||!m||!h))try{const d=await L.post("/carts",{cartProductMenuId:g.id,storeId:parseInt(h),cartId:parseInt(m),productId:g.id,quantity:y});d.data.isSuccess?(console.log("Th\xEAm v\xE0o gi\u1ECF h\xE0ng th\xE0nh c\xF4ng:",d.data),await i(),E()):console.error("L\u1ED7i khi th\xEAm v\xE0o gi\u1ECF h\xE0ng:",d.data.message)}catch(d){console.error("L\u1ED7i khi th\xEAm v\xE0o gi\u1ECF h\xE0ng:",d)}},[g,y,i,E,m,h]),w=o.exports.useCallback(async()=>{if(!(!g||!C||!m||!h))try{const d=await L.put("/carts/item",{cartProductMenuId:C.id,storeId:parseInt(h),cartId:parseInt(m),productId:g.id,quantity:y});d.data.isSuccess?(console.log("C\u1EADp nh\u1EADt gi\u1ECF h\xE0ng th\xE0nh c\xF4ng:",d.data),await i(),E()):console.error("L\u1ED7i khi c\u1EADp nh\u1EADt gi\u1ECF h\xE0ng:",d.data.message)}catch(d){console.error("L\u1ED7i khi c\u1EADp nh\u1EADt gi\u1ECF h\xE0ng:",d)}},[g,C,y,i,E,m,h]),z=o.exports.useCallback(async()=>{if(!(!C||!m||!h))try{const d=await L.delete("/carts/item",{data:{itemId:C.id,cartId:parseInt(m),storeId:parseInt(h)}});d.data.isSuccess?(console.log("X\xF3a s\u1EA3n ph\u1EA9m kh\u1ECFi gi\u1ECF h\xE0ng th\xE0nh c\xF4ng:",d.data),await i(),E()):console.error("L\u1ED7i khi x\xF3a s\u1EA3n ph\u1EA9m kh\u1ECFi gi\u1ECF h\xE0ng:",d.data.message)}catch(d){console.error("L\u1ED7i khi x\xF3a s\u1EA3n ph\u1EA9m kh\u1ECFi gi\u1ECF h\xE0ng:",d)}},[C,i,E,m,h]),f=o.exports.useCallback(()=>{S("/finish-order"),E()},[S,E]);return g?a(Be,{visible:r,onClose:E,autoHeight:!0,mask:!0,handler:!0,swipeToClose:!0,children:[a("div",{className:"p-4",children:[a("div",{className:"flex items-center mb-4",children:[e("div",{className:"w-20 h-20 mr-4",children:e(ue,{src:g.product.urlImage,alt:g.product.name,ratio:1})}),a("div",{children:[e("h3",{className:"text-lg font-semibold mb-2",children:g.product.name}),a("p",{className:"text-primary font-semibold",children:["\u0111 ",$(g.price)]})]})]}),a("div",{className:"mb-4",children:[e("label",{className:"block mb-2",children:"S\u1ED1 l\u01B0\u1EE3ng:"}),e("input",{type:"number",value:y,onChange:d=>D(Number(d.target.value)),min:"1",className:"w-full p-2 border rounded"})]})]}),a(p,{m:0,flex:!0,justifyContent:"space-between",pb:4,children:[e("div",{className:"text-sm",children:"T\u1ED5ng ti\u1EC1n"}),a("div",{className:"text-lg font-medium text-primary",children:[$(y*g.price)," VN\u0110"]})]}),e(p,{m:4,flex:!0,justifyContent:"space-between",gap:2,children:t.isUpdate?a(O,{children:[e(I,{fullWidth:!0,className:"flex-1 bg-pink-100 text-red-500 border border-red-500",onClick:z,children:"X\xF3a s\u1EA3n ph\u1EA9m"}),e(I,{fullWidth:!0,className:"flex-1 bg-red-500 text-white",onClick:w,children:"C\u1EADp nh\u1EADt"})]}):a(O,{children:[e(I,{fullWidth:!0,className:"flex-1 bg-pink-100 text-red-500 border border-red-500",onClick:f,children:"Thanh to\xE1n"}),e(I,{fullWidth:!0,className:"flex-1 bg-red-500 text-white",onClick:x,children:"Th\xEAm v\xE0o gi\u1ECF"})]})})]}):null},dt=({productId:r,pathImg:s,nameProduct:t,salePrice:n,retailPrice:u})=>{const{setOpenProductPicker:c,setProductInfoPicked:i}=P(y=>y),m=M(),h=()=>{c(!0),i({productId:r,isUpdate:!1})};return a("div",{className:"w-full flex flex-row items-center border border-[#E4E8EC] rounded-lg overflow-hidden h-24",role:"button",children:[e("div",{className:"w-24 flex-none",onClick:()=>{m(`/detail-product/${r}`)},children:e(ue,{src:s,alt:"image product",ratio:1})}),a("div",{className:" p-3 pr-0 flex-1",onClick:()=>{m(`/detail-product/${r}`)},children:[e("div",{className:"line-clamp-2 text-sm break-words",children:t}),a("span",{className:" pt-2 font-semibold text-sm text-primary",children:[e("span",{className:" font-normal text-xs text-primary",children:"\u0111 "}),$(n)]})]}),e(p,{mx:2,flex:!0,justifyContent:"center",alignItems:"center",className:"flex-none",children:e("div",{className:"w-6 h-6 rounded-full bg-primary flex justify-center items-center",onClick:h,role:"button",children:e(G,{icon:"zi-plus",size:16,className:"text-white"})})}),e(Ne,{})]})},ut="4318657068771012646",ht=()=>a("div",{className:"flex flex-row justify-between items-center p-4 bg-white",children:[a("div",{className:"flex flex-row items-center",children:[e("img",{src:"https://mms.img.susercontent.com/25b7e43f3c5985a5773c430213155c4c",alt:"store-img",className:" rounded-full object-cover w-[60px] h-[60px]"}),a("div",{className:" pl-4",children:[e("div",{className:" text-base font-medium pb-1",children:"B\xE1ch H\xF3a S\u1EC9"}),e("div",{className:" text-sm font-normal text-gray-500 pb-1",children:"5000 theo d\xF5i"}),a("div",{className:" flex flex-row text-sm font-normal  text-gray-500",children:[e("div",{className:"flex items-center justify-center",children:e(G,{icon:"zi-location-solid",size:12})}),e("div",{className:" pl-1",children:"Qu\u1EADn 9"})]})]})]}),e(I,{className:"chat-button",variant:"primary",size:"small",style:{backgroundColor:"red"},onClick:()=>{const s=X(t=>t.template.oaIDtoOpenChat||"");Le({type:"oa",id:s||ut})},children:"Nh\u1EAFn tin"})]}),mt=()=>{const{setMenu:r,menu:s,setSearchProduct:t,cart:n,fetchCart:u,storeId:c}=P(g=>g),i=M(),m=q(),h=o.exports.useCallback(g=>{t(g)},[t]),y=o.exports.useMemo(()=>a("div",{className:"flex items-center",children:[e(k.Search,{placeholder:"T\xECm ki\u1EBFm s\u1EA3n ph\u1EA9m",onSearch:h,className:"cus-input-search flex-grow"}),e(G,{icon:"zi-user",size:24,className:"ml-2",onClick:()=>i("/store-profile")})]}),[h,i]);o.exports.useEffect(()=>{m({customTitle:X(C=>C.template.searchBar)?y:"",hasLeftIcon:!1,type:"secondary"}),H("secondary"),(async()=>{try{const C={page:0,size:10},E=await L.get(`/menu?page=${C.page}&size=${C.size}&storeId=${c}`);E.data.isSuccess?(console.log("Data Products: ",E.data.data.content),r(E.data.data.content),console.log("Menu:",s)):console.error("L\u1ED7i khi l\u1EA5y danh s\xE1ch s\u1EA3n ph\u1EA9m:",E.data.message)}catch(C){console.error("L\u1ED7i khi l\u1EA5y danh s\xE1ch s\u1EA3n ph\u1EA9m:",C)}})(),u()},[m,y,r,u]);const{totalQuantity:D,totalPrice:S}=o.exports.useMemo(()=>n.items.reduce((g,C)=>(g.totalQuantity+=1,g.totalPrice+=(C.product.price||0)*C.quantity,g),{totalQuantity:0,totalPrice:0}),[n.items]);return e(F,{children:s&&s.length>0&&a(O,{children:[e("div",{className:"bg-primary",children:e(ht,{})}),e("div",{className:"bg-gray-100 h-3"}),e("div",{className:"bg-white p-3",style:{marginBottom:S>0?"120px":"0px"},children:s.map(g=>e("div",{className:"mb-2 w-full",children:e(dt,{pathImg:g.product.urlImage,nameProduct:g.product.name,salePrice:g.price,retailPrice:g.product.basePrice,productId:g.id})},g.id))}),S>0&&a(O,{children:[e(be,{quantity:D,totalPrice:S}),e(de,{listBtn:[{id:1,content:"Ho\xE0n t\u1EA5t \u0111\u01A1n h\xE0ng",type:"primary",onClick:()=>{i("/finish-order")},className:"bg-red-500 text-white"}],zIndex:99})]})]})})},pt=()=>{const r=M(),s=q();return o.exports.useEffect(()=>{s({title:"\u0110\u1EB7t h\xE0ng th\xE0nh c\xF4ng",hasLeftIcon:!1,type:"secondary"}),H("secondary")},[]),e(F,{children:e("div",{className:"flex flex-col items-center justify-center h-screen",children:e(p,{m:0,p:4,className:"bg-white rounded-lg shadow-md",children:a("div",{className:"flex flex-col items-center",children:[e(G,{icon:"zi-check-circle",size:64,className:"text-primary"}),e(l,{type:"h3",className:"mt-4 font-bold",children:"\u0110\u1EB7t h\xE0ng th\xE0nh c\xF4ng"}),e(l,{className:"mt-2 text-gray-500",children:"C\u1EA3m \u01A1n b\u1EA1n \u0111\xE3 tin t\u01B0\u1EDFng v\xE0 \u1EE7ng h\u1ED9 c\u1EEDa h\xE0ng c\u1EE7a ch\xFAng t\xF4i."}),e(I,{type:"primary",className:"mt-6",style:{backgroundColor:"red"},onClick:()=>{r("/menu")},fullWidth:!0,children:"Ti\u1EBFp t\u1EE5c mua s\u1EAFm"})]})})})})},gt=()=>{const[r,s]=o.exports.useState([]),[t,n]=o.exports.useState(0),[u,c]=o.exports.useState(1),i=10,{accessToken:m}=P(E=>E),h=q(),y=J();o.exports.useEffect(()=>{h({title:"\u0110\u01A1n h\xE0ng c\u1EE7a t\xF4i",type:"secondary",hasLeftIcon:!0}),H("secondary"),D()},[u]);const D=async()=>{try{const E=await j.get("/order",{params:{page:u-1,size:i},headers:{Authorization:`Bearer ${m}`}});E.data.isSuccess?(s(E.data.data.content),n(E.data.data["total-element"])):console.error("Error fetching orders:",E.data.message)}catch(E){console.error("Error fetching orders:",E)}},S=E=>{c(E)},g=E=>{y(`/orderdetailshipper/${E}`)},C=async(E,x)=>{try{const w=await j.put(`/order?id=${E}`,{orderStatus:x});w.data.isSuccess?(console.log("C\u1EADp nh\u1EADt tr\u1EA1ng th\xE1i \u0111\u01A1n h\xE0ng th\xE0nh c\xF4ng:",w.data),D()):console.error("L\u1ED7i khi c\u1EADp nh\u1EADt tr\u1EA1ng th\xE1i \u0111\u01A1n h\xE0ng:",w.data.message)}catch(w){console.error("L\u1ED7i khi c\u1EADp nh\u1EADt tr\u1EA1ng th\xE1i \u0111\u01A1n h\xE0ng:",w)}};return e(F,{children:a(p,{p:4,children:[e(l,{bold:!0,size:"large",className:"mb-4",children:"Danh s\xE1ch \u0111\u01A1n h\xE0ng"}),r.map(E=>e(p,{className:"mb-4 p-3 border rounded cursor-pointer",onClick:()=>g(E.id),children:a("div",{children:[a(l,{bold:!0,children:["M\xE3 \u0111\u01A1n h\xE0ng: ",E.id]}),a(l,{children:["Tr\u1EA1ng th\xE1i: ",E.orderStatus]}),a(l,{children:["Kh\xE1ch h\xE0ng: ",E.orderContact.customerName]}),a(l,{children:["\u0110\u1ECBa ch\u1EC9: ",E.orderContact.buildingNumber,","," ",E.orderContact.street]}),!["CANCELLED","PICKED_UP","DELIVERED","ACCEPTED"].includes(E.orderStatus)&&a(R,{value:E.orderStatus,onChange:x=>C(E.id,x),placeholder:"C\u1EADp nh\u1EADt tr\u1EA1ng th\xE1i",className:"mb-2",children:[e("option",{value:"PENDING",children:"\u0110ang ch\u1EDD"}),e("option",{value:"IN_TRANSIT",children:"\u0110ang v\u1EADn chuy\u1EC3n"}),e("option",{value:"DELIVERED",children:"\u0110\xE3 giao h\xE0ng"})]})]})},E.id)),e(pe,{current:u,total:t,pageSize:i,onChange:S})]})})},Et=()=>{const{accessToken:r}=P(f=>f),[s,t]=o.exports.useState(null),[n,u]=o.exports.useState(!1),[c,i]=o.exports.useState(null),[m,h]=o.exports.useState(""),[y,D]=o.exports.useState(!1),S=q(),g=M();o.exports.useEffect(()=>{S({title:"Th\xF4ng tin t\xE0i x\u1EBF",type:"secondary",hasLeftIcon:!0}),H("secondary"),(async()=>{try{const d=await j.get("/shippers",{headers:{Authorization:`Bearer ${r}`}});d.data.isSuccess?(t(d.data.data),i(d.data.data)):console.error("Error fetching shipper details:",d.data.message)}catch(d){console.error("Error fetching shipper details:",d)}})()},[r,S]);const C=()=>{u(!0)},E=async()=>{try{const f=await j.put("/shippers",{email:c?.email,name:c?.name,phone:c?.phone,licenseNumber:c?.licenseNumber,licenseIssueDate:c?.licenseIssueDate,idCardNumber:c?.idCardNumber,idCardIssuePlace:c?.idCardIssuePlace,idCardIssueDate:c?.idCardIssueDate,vehicleType:c?.vehicleType});f.data.isSuccess&&(t(f.data.data),u(!1))}catch(f){console.error("Error updating shipper details:",f)}},x=async()=>{try{const f=await j.patch(`/shippers/reset-password?password=${m}`);f.data.isSuccess?(console.log("Password changed successfully:",f.data.message),h(""),D(!1)):console.error("Error changing password:",f.data.message)}catch(f){console.error("Error changing password:",f)}},w=()=>{g("/ordersofshipper")},z=()=>{D(!0)};return s?e(F,{className:"page",children:e(p,{className:"p-4",children:n?a(O,{children:[e(k,{label:"Email",value:c?.email,onChange:f=>i(d=>d?{...d,email:f.target.value}:null),className:"mb-4"}),e(k,{label:"T\xEAn",value:c?.name,onChange:f=>i(d=>d?{...d,name:f.target.value}:null),className:"mb-4"}),e(k,{label:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i",value:c?.phone,onChange:f=>i(d=>d?{...d,phone:f.target.value}:null),className:"mb-4"}),e(k,{label:"S\u1ED1 gi\u1EA5y ph\xE9p l\xE1i xe",value:c?.licenseNumber,onChange:f=>i(d=>d?{...d,licenseNumber:f.target.value}:null),className:"mb-4"}),e(k,{label:"Ng\xE0y c\u1EA5p gi\u1EA5y ph\xE9p l\xE1i xe",value:c?.licenseIssueDate,onChange:f=>i(d=>d?{...d,licenseIssueDate:f.target.value}:null),className:"mb-4"}),e(k,{label:"S\u1ED1 CMND/CCCD",value:c?.idCardNumber,onChange:f=>i(d=>d?{...d,idCardNumber:f.target.value}:null),className:"mb-4"}),e(k,{label:"N\u01A1i c\u1EA5p CMND/CCCD",value:c?.idCardIssuePlace,onChange:f=>i(d=>d?{...d,idCardIssuePlace:f.target.value}:null),className:"mb-4"}),e(k,{label:"Ng\xE0y c\u1EA5p CMND/CCCD",value:c?.idCardIssueDate,onChange:f=>i(d=>d?{...d,idCardIssueDate:f.target.value}:null),className:"mb-4"}),e(k,{label:"Lo\u1EA1i ph\u01B0\u01A1ng ti\u1EC7n",value:c?.vehicleType,onChange:f=>i(d=>d?{...d,vehicleType:f.target.value}:null),className:"mb-4"}),e(I,{style:{backgroundColor:"red"},fullWidth:!0,className:"mt-4",onClick:E,children:"L\u01B0u thay \u0111\u1ED5i"})]}):a(O,{children:[a(p,{className:"mb-4",children:[e(l,{bold:!0,size:"small",className:"mb-1",children:"Email"}),e(l,{children:s.email})]}),a(p,{className:"mb-4",children:[e(l,{bold:!0,size:"small",className:"mb-1",children:"T\xEAn"}),e(l,{children:s.name})]}),a(p,{className:"mb-4",children:[e(l,{bold:!0,size:"small",className:"mb-1",children:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i"}),e(l,{children:s.phone})]}),a(p,{className:"mb-4",children:[e(l,{bold:!0,size:"small",className:"mb-1",children:"S\u1ED1 gi\u1EA5y ph\xE9p l\xE1i xe"}),e(l,{children:s.licenseNumber})]}),a(p,{className:"mb-4",children:[e(l,{bold:!0,size:"small",className:"mb-1",children:"Ng\xE0y c\u1EA5p gi\u1EA5y ph\xE9p l\xE1i xe"}),e(l,{children:s.licenseIssueDate})]}),a(p,{className:"mb-4",children:[e(l,{bold:!0,size:"small",className:"mb-1",children:"S\u1ED1 CMND/CCCD"}),e(l,{children:s.idCardNumber})]}),a(p,{className:"mb-4",children:[e(l,{bold:!0,size:"small",className:"mb-1",children:"N\u01A1i c\u1EA5p CMND/CCCD"}),e(l,{children:s.idCardIssuePlace})]}),a(p,{className:"mb-4",children:[e(l,{bold:!0,size:"small",className:"mb-1",children:"Ng\xE0y c\u1EA5p CMND/CCCD"}),e(l,{children:s.idCardIssueDate})]}),a(p,{className:"mb-4",children:[e(l,{bold:!0,size:"small",className:"mb-1",children:"Lo\u1EA1i ph\u01B0\u01A1ng ti\u1EC7n"}),e(l,{children:s.vehicleType})]}),e(I,{style:{backgroundColor:"red"},fullWidth:!0,onClick:w,children:"Xem \u0111\u01A1n h\xE0ng"}),y&&a(p,{className:"mt-4",children:[e(k,{type:"password",placeholder:"M\u1EADt kh\u1EA9u m\u1EDBi",value:m,onChange:f=>h(f.target.value),className:"mb-4"}),e(I,{style:{backgroundColor:"red"},fullWidth:!0,onClick:x,children:"X\xE1c nh\u1EADn"})]}),!y&&e(I,{style:{backgroundColor:"red"},fullWidth:!0,className:"mt-4",onClick:z,children:"Thay \u0111\u1ED5i m\u1EADt kh\u1EA9u"}),e(I,{style:{backgroundColor:"red"},fullWidth:!0,className:"mt-4",onClick:C,children:"Ch\u1EC9nh s\u1EEDa th\xF4ng tin"})]})})}):e(F,{children:"Loading..."})},Q=ce.create({baseURL:"https://api-user.fams.college/api/v1"});Q.interceptors.request.use(r=>{const{accessToken:s}=P.getState();return s&&!r.url?.includes("/auth/")&&(r.headers.Authorization=`Bearer ${s}`),r.headers["Content-Type"]="application/json",r});const xt=()=>{const{setAccessToken:r,setStoreId:s,setIsLoggedIn:t,setCartId:n,clearTokens:u}=P(x=>x),[c,i]=o.exports.useState(""),[m,h]=o.exports.useState(""),[y,D]=o.exports.useState("store"),S=M(),g=q(),C=o.exports.useCallback(async()=>{try{const{userInfo:x}=await ge({}),{token:w}=await new Promise((A,v)=>{Ee({success:T=>A(T),fail:T=>v(T)})}),z=await new Promise((A,v)=>{xe({success:T=>{console.log("access_token_zalo:",T),A(T)},fail:T=>v(T)})}),f=await fetch("https://graph.zalo.me/v2.0/me/info",{headers:{access_token:z,code:w,secret_key:"0TR1rUOW664SjBe84Y4m"}}).then(A=>A.json()).then(A=>A.data.number),d=await Oe.hash(f,3),b=await Q.post("/auth/zalo/login",{zaloId:x.id,hashPhone:d});b.data.isSuccess?(r(b.data.data.accessToken),s(b.data.data.storeId.toString()),t(!0),console.log(b.data.message),console.log(b.data.data),await(async v=>{try{const T=await Q.get(`/carts?storeId=${v}`,{headers:{Authorization:`Bearer ${b.data.data.accessToken}`}});T.data.isSuccess?(n(T.data.data.cartId),console.log("Get cart successfully:",T.data)):console.log("Error getting cart:",T.data.message)}catch(T){console.error("Error getting cart:",T)}})(b.data.data.storeId.toString()),S("/menu")):console.log(b.data.message)}catch(x){console.log("error:",x)}},[r,s,t,n,S]),E=o.exports.useCallback(async()=>{try{const x=await j.post("/auth/authentication",{email:c,password:m});x.data.isSuccess?(r(x.data.data.accessToken),t(!0),console.log(x.data.message),console.log(x.data.data),S("/shipperprofile")):console.log(x.data.message)}catch(x){console.log("error:",x)}},[c,m,r,t,S]);return o.exports.useEffect(()=>{g({customTitle:"B\xE1ch H\xF3a S\u1EC9",hasLeftIcon:!1,type:"secondary"}),H("secondary")},[g]),o.exports.useEffect(()=>{u()},[u]),a(F,{children:[e("div",{className:"bg-primary",children:e("div",{className:"p-4",children:e(l,{type:"h2",className:"text-center text-white font-bold",children:"\u0110\u0103ng nh\u1EADp"})})}),a("div",{className:"bg-white p-4",children:[e("div",{className:"mb-4",children:e(I,{fullWidth:!0,className:y==="store"?"bg-primary text-white":"bg-slate-400 text-black",onClick:C,children:"\u0110\u0103ng nh\u1EADp v\u1EDBi vai tr\xF2 Store"})}),e("div",{className:"mb-4",children:e(I,{fullWidth:!0,className:y==="shipper"?"bg-primary text-white":"bg-slate-400 text-black",onClick:()=>D("shipper"),children:"\u0110\u0103ng nh\u1EADp v\u1EDBi vai tr\xF2 Shipper"})}),y==="shipper"&&a("form",{onSubmit:x=>{x.preventDefault(),E()},children:[e("div",{className:"mb-4",children:e(k,{type:"email",placeholder:"Email",value:c,onChange:x=>i(x.target.value),className:"cus-input-search"})}),e("div",{className:"mb-4",children:e(k,{type:"password",placeholder:"M\u1EADt kh\u1EA9u",value:m,onChange:x=>h(x.target.value),className:"cus-input-search"})}),e(I,{type:"highlight",htmlType:"submit",className:"w-full",children:"\u0110\u0103ng nh\u1EADp"})]}),a("p",{className:"mt-4 text-center",children:["Ch\u01B0a c\xF3 t\xE0i kho\u1EA3n?"," ",e("a",{style:{color:"blue"},onClick:()=>S("/signup"),children:"\u0110\u0103ng k\xFD ngay!"})]})]})]})},ft=()=>{const{setName:r,setLocation:s,clearTokens:t}=P(N=>N),n=M(),u=q(),{openSnackbar:c}=oe(),[i,m]=o.exports.useState("store"),[h,y]=o.exports.useState(""),[D,S]=o.exports.useState(""),[g,C]=o.exports.useState([]),[E,x]=o.exports.useState(null),[w,z]=o.exports.useState(""),[f,d]=o.exports.useState(""),[b,A]=o.exports.useState(""),[v,T]=o.exports.useState(""),[ee,ye]=o.exports.useState(""),[te,Ce]=o.exports.useState(""),[re,ve]=o.exports.useState(""),[ae,De]=o.exports.useState("MOTOR");o.exports.useEffect(()=>{t(),r(""),s("")},[t,r,s]),o.exports.useEffect(()=>{u({customTitle:"B\xE1ch H\xF3a S\u1EC9",hasLeftIcon:!1,type:"secondary"}),H("secondary")},[u]),o.exports.useEffect(()=>{(async()=>{try{const Y=await Q.get("/type");Y.data.isSuccess&&C(Y.data.data)}catch(Y){console.error("Error fetching store types:",Y)}})()},[]);const he=o.exports.useCallback(async()=>{try{const{userInfo:N}=await ge({}),{token:Y}=await new Promise((U,ne)=>{Ee({success:_=>U(_),fail:_=>ne(_)})}),Ae=await new Promise((U,ne)=>{xe({success:_=>U(_),fail:_=>ne(_)})}),we=await fetch("https://graph.zalo.me/v2.0/me/info",{headers:{access_token:Ae,code:Y,secret_key:"0TR1rUOW664SjBe84Y4m"}}).then(U=>U.json()).then(U=>U.data.number),se=await Q.post("/auth/zalo/signup",{name:h,location:D,phoneNumber:we,zaloId:N.id,storeTypeId:E});se.data.isSuccess?(c({text:se.data.message,type:"success"}),n("/")):c({text:se.data.message,type:"error"})}catch(N){console.error("Error during store signup:",N),c({text:"An error occurred during signup",type:"error"})}},[h,D,E,n,c]),me=o.exports.useCallback(async()=>{try{const N=await j.post("/shippers",{email:w,name:h,phone:f,licenseNumber:b,licenseIssueDate:v,idCardNumber:ee,idCardIssuePlace:te,idCardIssueDate:re,vehicleType:ae});N.data.isSuccess?(c({text:N.data.message,type:"success"}),n("/")):c({text:N.data.message,type:"error"})}catch(N){console.error("Error during shipper signup:",N),c({text:"An error occurred during signup",type:"error"})}},[w,h,f,b,v,ee,te,re,ae,n,c]),Se=o.exports.useCallback(N=>{N.preventDefault(),i==="store"?he():me()},[i,he,me]);return a(F,{children:[e("div",{className:"bg-primary",children:e("div",{className:"p-4",children:e(l,{type:"h2",className:"text-center text-white font-bold",children:"\u0110\u0103ng k\xFD"})})}),a("div",{className:"bg-white p-4",children:[e("div",{className:"mb-4",children:e(I,{fullWidth:!0,className:i==="store"?"bg-primary text-white":"bg-slate-400 text-black",onClick:()=>m("store"),children:"\u0110\u0103ng k\xFD v\u1EDBi vai tr\xF2 Store"})}),e("div",{className:"mb-4",children:e(I,{fullWidth:!0,className:i==="shipper"?"bg-primary text-white":"bg-slate-400 text-black",onClick:()=>m("shipper"),children:"\u0110\u0103ng k\xFD v\u1EDBi vai tr\xF2 Shipper"})}),a("form",{onSubmit:Se,children:[i==="store"?a(O,{children:[e("div",{className:"mb-4",children:e(k,{type:"text",placeholder:"T\xEAn c\u1EEDa h\xE0ng",value:h,onChange:N=>y(N.target.value),className:"cus-input-search",required:!0})}),e("div",{className:"mb-4",children:e(k,{type:"text",placeholder:"\u0110\u1ECBa ch\u1EC9",value:D,onChange:N=>S(N.target.value),className:"cus-input-search",required:!0})}),e("div",{className:"mb-4",children:e(R,{placeholder:"Lo\u1EA1i c\u1EEDa h\xE0ng",value:E?.toString(),onChange:N=>x(Number(N)),className:"cus-input-search",required:!0,children:g.map(N=>e(R.Option,{value:N.id.toString(),children:N.name},N.id))})})]}):a(O,{children:[e("div",{className:"mb-4",children:e(k,{type:"email",placeholder:"Email",value:w,onChange:N=>z(N.target.value),className:"cus-input-search",required:!0})}),e("div",{className:"mb-4",children:e(k,{type:"text",placeholder:"T\xEAn",value:h,onChange:N=>y(N.target.value),className:"cus-input-search",required:!0})}),e("div",{className:"mb-4",children:e(k,{type:"tel",placeholder:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i",value:f,onChange:N=>d(N.target.value),className:"cus-input-search",required:!0})}),e("div",{className:"mb-4",children:e(k,{type:"text",placeholder:"S\u1ED1 gi\u1EA5y ph\xE9p l\xE1i xe",value:b,onChange:N=>A(N.target.value),className:"cus-input-search",required:!0})}),e("div",{className:"mb-4",children:e(k,{type:"date",placeholder:"Ng\xE0y c\u1EA5p gi\u1EA5y ph\xE9p l\xE1i xe",value:v,onChange:N=>T(N.target.value),className:"cus-input-search",required:!0})}),e("div",{className:"mb-4",children:e(k,{type:"text",placeholder:"S\u1ED1 CMND/CCCD",value:ee,onChange:N=>ye(N.target.value),className:"cus-input-search",required:!0})}),e("div",{className:"mb-4",children:e(k,{type:"text",placeholder:"N\u01A1i c\u1EA5p CMND/CCCD",value:te,onChange:N=>Ce(N.target.value),className:"cus-input-search",required:!0})}),e("div",{className:"mb-4",children:e(k,{type:"date",placeholder:"Ng\xE0y c\u1EA5p CMND/CCCD",value:re,onChange:N=>ve(N.target.value),className:"cus-input-search",required:!0})}),e("div",{className:"mb-4",children:a(R,{placeholder:"Lo\u1EA1i ph\u01B0\u01A1ng ti\u1EC7n",value:ae,onChange:N=>De(N),className:"cus-input-search",required:!0,children:[e(R.Option,{value:"MOTOR",children:"Xe m\xE1y"}),e(R.Option,{value:"CAR",children:"\xD4 t\xF4"}),e(R.Option,{value:"TRUCK",children:"Xe t\u1EA3i"}),e(R.Option,{value:"VAN",children:"Xe van"})]})})]}),e(I,{type:"highlight",htmlType:"submit",className:"w-full",children:"\u0110\u0103ng k\xFD"})]}),a("p",{className:"mt-4 text-center",children:["\u0110\xE3 c\xF3 t\xE0i kho\u1EA3n?"," ",e("a",{style:{color:"blue"},onClick:()=>n("/"),children:"\u0110\u0103ng nh\u1EADp ngay!"})]})]})]})},bt=()=>{const{storeId:r,storeDetails:s,setStoreDetails:t}=P(x=>x),[n,u]=o.exports.useState(!1),[c,i]=o.exports.useState(null),[m,h]=o.exports.useState("PENDING"),y=q(),D=J();o.exports.useEffect(()=>{y({title:"Th\xF4ng tin c\u1EEDa h\xE0ng",type:"secondary",hasLeftIcon:!0}),H("secondary"),(async()=>{try{const w=await L.get(`/store/details?id=${r}`);w.data.isSuccess&&(t(w.data.data),i(w.data.data))}catch(w){console.error("Error fetching store details:",w)}})()},[r,t,y]);const S=()=>{u(!0)},g=async()=>{try{const x=await L.put("/store",{id:r,name:c?.name,phoneNumber:c?.phoneNumber,location:c?.location});x.data.isSuccess&&(t(x.data.data),u(!1))}catch(x){console.error("Error updating store details:",x)}},C=(x,w)=>{i(z=>z?{...z,[x]:w}:null)},E=()=>{D(`/view-orders?storeId=${r}&orderStatus=${m}`)};return s?e(F,{className:"page",children:a(p,{className:"p-4",children:[n?a(O,{children:[e(k,{label:"T\xEAn c\u1EEDa h\xE0ng",value:c?.name,onChange:x=>C("name",x.target.value),className:"mb-4"}),e(k,{label:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i",value:c?.phoneNumber,onChange:x=>C("phoneNumber",x.target.value),className:"mb-4"}),e(k,{label:"\u0110\u1ECBa ch\u1EC9",value:c?.location,onChange:x=>C("location",x.target.value),className:"mb-4"}),e(I,{style:{backgroundColor:"red"},fullWidth:!0,className:"mt-4",onClick:g,children:"L\u01B0u thay \u0111\u1ED5i"})]}):a(O,{children:[a(p,{className:"mb-4",children:[e(l,{bold:!0,size:"small",className:"mb-1",children:"T\xEAn c\u1EEDa h\xE0ng"}),e(l,{children:s.name})]}),a(p,{className:"mb-4",children:[e(l,{bold:!0,size:"small",className:"mb-1",children:"Lo\u1EA1i c\u1EEDa h\xE0ng"}),e(l,{children:s.storeType})]}),a(p,{className:"mb-4",children:[e(l,{bold:!0,size:"small",className:"mb-1",children:"\u0110i\u1EC3m t\xEDch l\u0169y"}),e(l,{children:s.point})]}),a(p,{className:"mb-4",children:[e(l,{bold:!0,size:"small",className:"mb-1",children:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i"}),e(l,{children:s.phoneNumber})]}),a(p,{className:"mb-4",children:[e(l,{bold:!0,size:"small",className:"mb-1",children:"\u0110\u1ECBa ch\u1EC9"}),e(l,{children:s.location})]}),a(p,{className:"mb-4",children:[e(l,{bold:!0,size:"small",className:"mb-1",children:"C\u1EA5p \u0111\u1ED9 c\u1EEDa h\xE0ng"}),e(l,{children:s.storeLevel})]}),e(I,{style:{backgroundColor:"red"},fullWidth:!0,onClick:S,children:"Ch\u1EC9nh s\u1EEDa th\xF4ng tin"})]}),a(p,{className:"mt-4",children:[e(l,{bold:!0,size:"small",className:"mb-1",children:"Xem \u0111\u01A1n h\xE0ng"}),a(R,{value:m,onChange:x=>h(x),placeholder:m,className:"mb-2",children:[e("option",{value:"PENDING",children:"\u0110ang ch\u1EDD"}),e("option",{value:"ACCEPTED",children:"\u0110\xE3 ch\u1EA5p nh\u1EADn"}),e("option",{value:"PICKED_UP",children:"\u0110\xE3 l\u1EA5y h\xE0ng"}),e("option",{value:"IN_TRANSIT",children:"\u0110ang v\u1EADn chuy\u1EC3n"}),e("option",{value:"DELIVERED",children:"\u0110\xE3 giao h\xE0ng"}),e("option",{value:"CANCELLED",children:"\u0110\xE3 h\u1EE7y"})]}),e(I,{style:{backgroundColor:"red"},fullWidth:!0,onClick:E,children:"Xem \u0111\u01A1n h\xE0ng"})]})]})}):e(F,{children:"Loading..."})},Nt=()=>{const[r,s]=o.exports.useState([]),[t,n]=o.exports.useState(0),[u,c]=o.exports.useState(1),[i,m]=o.exports.useState(!1),[h,y]=o.exports.useState(null),[D]=Z.useForm(),S=10,{storeId:g}=P(v=>v),C=Me(),E=J(),w=new URLSearchParams(C.search).get("orderStatus")||"PENDING";o.exports.useEffect(()=>{z()},[u,w]);const z=async()=>{try{const v=await L.get("/orders",{params:{page:u-1,size:S,storeId:g,orderStatus:w}});v.data.isSuccess&&(s(v.data.data.content),n(v.data.data.totalElement))}catch(v){console.error("Error fetching orders:",v)}},f=v=>{c(v)},d=v=>{E(`/detail-order/${v}`)},b=v=>{y(v),m(!0)},A=async v=>{try{(await L.post("/orders/feedback",{storeId:g,orderId:h,orderFeedback:v.orderFeedback,deliveryFeedback:v.deliveryFeedback})).data.isSuccess&&(m(!1),D.resetFields(),z())}catch(T){console.error("Error submitting feedback:",T)}};return a(F,{children:[a(p,{p:4,children:[e(l,{bold:!0,size:"large",className:"mb-4",children:"Danh s\xE1ch \u0111\u01A1n h\xE0ng"}),r.map(v=>a(p,{className:"mb-4 p-3 border rounded cursor-pointer",children:[a("div",{onClick:()=>d(v.orderId),children:[a(l,{bold:!0,children:["M\xE3 \u0111\u01A1n h\xE0ng: ",v.orderId]}),a(l,{children:["T\u1ED5ng ti\u1EC1n: ",v.totalPrice]}),a(l,{children:["Tr\u1EA1ng th\xE1i: ",v.orderStatus]}),a(l,{children:["Ng\xE0y t\u1EA1o: ",v.createdDate]})]}),v.orderStatus==="DELIVERED"&&!v.orderFeedback&&e(I,{style:{backgroundColor:"red"},onClick:()=>b(v.orderId),children:"G\u1EEDi ph\u1EA3n h\u1ED3i"})]},v.orderId)),e(pe,{current:u,total:t,pageSize:S,onChange:f})]}),e(Re,{title:"G\u1EEDi ph\u1EA3n h\u1ED3i",visible:i,onCancel:()=>m(!1),onOk:D.submit,children:a(Z,{form:D,onFinish:A,children:[e(Z.Item,{name:"orderFeedback",label:"Ph\u1EA3n h\u1ED3i v\u1EC1 \u0111\u01A1n h\xE0ng",children:e(fe.TextArea,{})}),e(Z.Item,{name:"deliveryFeedback",label:"Ph\u1EA3n h\u1ED3i v\u1EC1 giao h\xE0ng",children:e(fe.TextArea,{})})]})})]})},yt={primary:{headerColor:"bg-primary",textColor:"text-white",iconColor:"text-white"},secondary:{headerColor:"bg-white",textColor:"text-black",iconColor:"text-gray-400"}},Ct=()=>{const{header:r}=P(S=>S),{route:s,hasLeftIcon:t,rightIcon:n,title:u,customTitle:c,type:i}=r,{headerColor:m,textColor:h,iconColor:y}=yt[i||"primary"],D=M();return e("div",{className:K("fixed top-0 z-50 w-screen h-header flex items-center",m,h),children:a("div",{className:"flex items-center h-[44px] pl-5 pr-[105px] gap-3 w-full justify-between",children:[a("div",{className:"flex flex-row items-center",children:[t&&e("span",{onClick:()=>D(s||-1),children:e(G,{icon:"zi-arrow-left",className:y})}),c?ie.isValidElement(c)?c:e("div",{className:"pl-2 text-lg font-medium",children:String(c)}):e("div",{className:"pl-2 text-lg font-medium",children:u})]}),n&&ie.isValidElement(n)?n:null]})})},W=({children:r})=>{const{isLoggedIn:s}=P(n=>n),t=M();return o.exports.useEffect(()=>{s||t("/")},[s,t]),s?r:null},vt=()=>{const{clearTokens:r,accessToken:s,storeId:t,isLoggedIn:n,setAccessToken:u,setStoreId:c,setIsLoggedIn:i,fetchCart:m}=P(h=>h);return o.exports.useEffect(()=>{s&&t&&(i(!0),m(Number(t)))},[s,t,i,m]),o.exports.useEffect(()=>{r()},[r]),e(rt,{cssVariables:{"--zmp-primary-color":X(h=>h.template.primaryColor),"--zmp-primary-color-rgb":et(X(h=>h.template.primaryColor))},children:e(je,{children:e(o.exports.Suspense,{fallback:e("div",{className:"w-screen h-screen flex justify-center items-center",children:e($e,{})}),children:e(qe,{children:a(He,{children:[e(Ct,{}),a(We,{children:[e(B,{path:"/",element:e(xt,{})}),e(B,{path:"/signup",element:e(ft,{})}),e(B,{path:"/menu",element:e(W,{children:e(mt,{})})}),e(B,{path:"/order-success",element:e(W,{children:e(pt,{})})}),e(B,{path:"/finish-order",element:e(W,{children:e(it,{})})}),e(B,{path:"/detail-product/:productId",element:e(W,{children:e(ct,{})})}),e(B,{path:"/store-profile",element:e(W,{children:e(bt,{})})}),e(B,{path:"/view-orders",element:e(W,{children:e(Nt,{})})}),e(B,{path:"/detail-order/:orderId",element:e(W,{children:e(Ze,{})})}),e(B,{path:"/ordersofshipper",element:e(W,{children:e(gt,{})})}),e(B,{path:"/orderdetailshipper/:orderId",element:e(W,{children:e(Ke,{})})}),e(B,{path:"/shipperprofile",element:e(Et,{})}),e(B,{path:"*",element:e("div",{children:"404 Not Found"})})]}),e(Ne,{})]})})})})})};window.APP_CONFIG||(window.APP_CONFIG=V);const Dt=Ue(document.getElementById("app"));Dt.render(ie.createElement(vt));
