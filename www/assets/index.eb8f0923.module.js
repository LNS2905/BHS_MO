import{r as h,j as o,B as C,a as e,b as v,c as G,d as J,p as Z,F as S,x as X,m as K,u as A,e as V,f as ee,I as F,P as D,g as $,T as B,C as te,S as re,h as ae,i as T,k as se,A as ne,l as oe,n as ce,Z as le,o as ie,R as z,q as de,s as ue}from"./vendor.40e8d299.module.js";const he={title:"BachHoaSi",headerColor:"",textColor:"white",statusBarColor:"#EF1724",leftButton:"none",textAlign:"left",actionBarHidden:!1,hideAndroidBottomNavigationBar:!1,hideIOSSafeAreaBottom:!1,selfControlLoading:!1,statusBar:"normal"},me=!1,pe=[],ge=[],xe=[],fe=[],Ee={primaryColor:"",searchBar:!0,orderValue:"500000",oaIDtoOpenChat:"3845899341339907617",shippingFee:"30000"};var P={app:he,debug:me,listCSS:pe,listSyncJS:ge,listAsyncJS:xe,pages:fe,template:Ee};const q=(...r)=>r.filter(a=>!!a).join(" "),k=r=>Math.round(Number(r)).toLocaleString(),ye=(r,a=void 0)=>{if(!!r){var t=r.replace("#","");t=t.match(new RegExp("(.{"+t.length/3+"})","g"));for(var s=0;s<t.length;s++)t[s]=parseInt(t[s].length==1?t[s]+t[s]:t[s],16);return typeof a!="undefined"&&t.push(a),t.join(", ")}},be=(r,a)=>Math.floor((1-Number(r)/Number(a))*100),W=h.exports.forwardRef((r,a)=>{const{children:t,listBtn:s,hidden:n,zIndex:i}=r;return o(C,{m:0,p:4,className:q("bg-white fixed bottom-0 left-0 right-0 shadow-btn-fixed",i?`z-[${i}]`:"z-[99999]",n&&"anime-move-down"),ref:a,children:[t&&e(C,{m:0,children:t}),e(C,{m:0,flex:!0,className:"gap-4",children:s?.map(d=>e(v,{fullWidth:!0,variant:d.type,size:"large",onClick:d.onClick,className:d.className,children:d.content},d.id))})]})}),w=G.create({baseURL:"https://api-user.fams.college/api/v1"});w.interceptors.request.use(r=>{const{accessToken:a}=N.getState();return a&&(r.headers.Authorization=`Bearer ${a}`,r.headers["Content-Type"]="application/json"),r});const Ce=J()(Z((r,a)=>({store:null,products:[],cart:{id:0,createdDate:new Date().toISOString(),updatedDate:new Date().toISOString(),items:[]},header:{},searchProduct:"",activeCate:0,activeFilter:"az",storeProductResult:[],openProductPicker:!1,setOpenProductPicker:t=>r({openProductPicker:t}),productInfoPicked:{productId:-1,isUpdate:!1},setProductInfoPicked:t=>r({productInfoPicked:t}),email:"",password:"",phoneNumber:"",name:"",username:"",locationSignup:"",order:null,storeDetails:null,storeUpdateRequest:null,menu:[],setMenu:t=>r({menu:t}),paginationResponse:null,responseObject:null,setHeader:t=>r(s=>({header:{...s.header,...t}})),setEmail:t=>r({email:t}),setPassword:t=>r({password:t}),setPhoneNumber:t=>r({phoneNumber:t}),setName:t=>r({name:t}),setUsername:t=>r({username:t}),setLocationSignup:t=>r({locationSignup:t}),location:"",setLocation:t=>r({location:t}),loginResponse:null,setLoginResponse:t=>r({loginResponse:t}),setStoreProductResult:t=>r({storeProductResult:t}),fetchCart:async()=>{const t=a().cartId;if(!t){console.error("Cart ID not found in Zustand!");return}try{const s=await w.get("/carts/items",{params:{page:0,size:100,cartId:parseInt(t)}});s.data.isSuccess?r({cart:{...a().cart,items:s.data.data.content}}):console.error("Failed to fetch cart:",s.data.message)}catch(s){console.error("Error fetching cart:",s)}},accessToken:null,refreshToken:null,storeId:null,cartId:null,isLoggedIn:!1,setAccessToken:t=>r({accessToken:t}),setRefreshToken:t=>r({refreshToken:t}),setStoreId:t=>r({storeId:t}),setCartId:t=>r({cartId:t}),setIsLoggedIn:t=>r({isLoggedIn:t}),logout:()=>r({accessToken:null,refreshToken:null,storeId:null,cartId:null,isLoggedIn:!1}),fetchNewCart:async t=>{try{const s=await w.get("/carts",{params:{storeId:t}});s.data.isSuccess?r({cartId:s.data.data.cartId.toString()}):console.error("Failed to fetch new cart:",s.data.message)}catch(s){console.error("Error fetching new cart:",s)}}}),{name:"app-storage",serialize:r=>{const a=new WeakSet;return JSON.stringify(r,(t,s)=>{if(typeof s=="object"&&s!==null){if(a.has(s))return;a.add(s)}if(!(s&&s.$$typeof&&s._owner)&&!(t==="_context"||t.startsWith("__react")))return s})},deserialize:r=>JSON.parse(r)}));var N=Ce;const Y=({handleOnClick:r})=>{const{cart:a}=N(n=>n),{quantity:t,totalPrice:s}=h.exports.useMemo(()=>a.items.reduce((n,i)=>(n.quantity+=1,n.totalPrice+=(i.product.price||0)*i.quantity,n),{quantity:0,totalPrice:0}),[a.items]);return t===0?null:o("div",{className:"text-base mx-2 px-4 py-3 flex items-center justify-between bg-gray-300 rounded-primary fixed bottom-[88px] left-0 right-0 z-50 anime-fade",onClick:r,role:"button",children:[e("div",{className:"font-medium",children:"\u0110\u01A1n h\xE0ng"}),o(C,{m:0,flex:!0,justifyContent:"space-around",alignItems:"center",children:[o("div",{children:[t," m\xF3n"]}),e("div",{className:"w-1 h-1 bg-black rounded-lg mx-3"}),e("div",{children:k(s)})]})]})},O=()=>{const{setHeader:r}=N(a=>({setHeader:a.setHeader}));return h.exports.useCallback(({route:a="",hasLeftIcon:t=!0,rightIcon:s=null,title:n=P.app.title,customTitle:i=null,type:d="primary"})=>r({route:a,hasLeftIcon:t,rightIcon:s,title:n,customTitle:i,type:d}),[r])};function j(r){return r(P)}const Ne=({children:r,cssVariables:a})=>(h.exports.useEffect(()=>(Object.keys(a).filter(t=>a[t]).forEach(t=>{document.documentElement.style.setProperty(`${t}`,a[t])}),()=>{Object.keys(a).forEach(t=>{document.documentElement.style.removeProperty(`${t}`)})}),[a]),e(S,{children:r})),ve=(r,a)=>new Promise((t,s)=>{X.createOrder({desc:a??`Thanh to\xE1n cho ${P.app.title}`,item:[],amount:r+Number(j(n=>n.template.shippingFee)),success:n=>{console.log("success: ",n),t(n)},fail:n=>{console.log("err: ",n),s(n)}})}),we={primary:P.template.primaryColor||P.app.statusBarColor,secondary:"#FFFFFF"},Ie={primary:P.app.textColor,secondary:"black"},L=r=>{r||(r="primary"),K({color:"",statusBarColor:we[r],textColor:Ie[r]})},ke=()=>{const{store:r,cart:a,cartTotalPrice:t,setOpenProductPicker:s,setProductInfoPicked:n}=N(y=>y),i=A(),{productId:d}=V(),m=O(),l=h.exports.useMemo(()=>{if(r&&r.products)return r.products.find(f=>f.id===Number(d))},[d,r]),E=h.exports.useMemo(()=>l&&l.salePrice&&l.retailPrice?be(l.salePrice,l.retailPrice):void 0,[l]),p=h.exports.useMemo(()=>({id:1,content:"Th\xEAm v\xE0o gi\u1ECF",type:"primary",onClick:()=>{s(!0),n({productId:Number(d),isUpdate:!0})}}),[d]),c=h.exports.useMemo(()=>({id:2,content:"Thanh to\xE1n",type:"secondary",onClick:()=>{i("/finish-order")}}),[a]),u=h.exports.useMemo(()=>t>0?[c,p]:[p],[t,p,c]);return h.exports.useEffect(()=>{m({title:"",rightIcon:e("div",{onClick:()=>ee({type:"zmp",data:{path:"/",title:l?.name,description:l?.description.slice(0,100),thumbnail:l?.img}}),children:e(F,{icon:"zi-share-external-1"})})}),L()},[l,m]),o(D,{children:[e("div",{className:" relative bg-white w-full",style:{paddingBottom:t>0?"120px":"80px"},children:l&&o(S,{children:[e("img",{src:l.img,alt:"",className:"w-full h-auto"}),E&&o("div",{className:"absolute top-2.5 right-2.5 text-white font-medium text-sm px-2 py-1 bg-[#FF9743] w-auto h-auto rounded-lg",children:["-",E,"%"]}),o(C,{m:0,p:4,className:"border-b",children:[e("div",{className:" text-lg",children:l.name}),o("span",{className:" pt-1 font-semibold text-base text-primary",children:[e("span",{className:" font-normal text-xs text-primary",children:"\u0111"}),k(l.salePrice)]}),o("span",{className:" pl-2 pt-1 font-medium text-sm text-zinc-400",children:["\u0111",k(l.retailPrice)]})]}),e(C,{m:0,px:4,py:5,className:" text-justify break-words whitespace-pre-line",children:l.description})]})}),!!t&&e(Y,{quantity:a.items.length,totalPrice:t,handleOnClick:()=>i("/finish-order")}),e(W,{listBtn:u})]})},Q=({src:r,alt:a,className:t,ratio:s,...n})=>{const i=`${1/s*100}%`;return e("div",{className:q("w-full relative",t),style:{paddingTop:i},children:e("img",{src:r,alt:a,...n,className:"w-full absolute top-0 left-0 h-full object-cover"})})},Pe=({id:r,pathImg:a,nameProduct:t,salePrice:s,quantity:n,handleOnClick:i})=>o("div",{className:"w-full flex flex-row items-center justify-between gap-1 border border-[#E4E8EC] rounded-lg overflow-hidden h-24 p-2 mt-2 bg-white",onClick:()=>i(r),role:"button",children:[o("div",{className:"flex flex-row items-center gap-1",children:[e("div",{className:"flex-none w-20 rounded-lg overflow-hidden",children:e(Q,{src:a,alt:"image product",ratio:1})}),e(C,{p:0,m:0,className:" flex-none relative w-5 h-5 rounded-full bg-slate-100",children:e("div",{className:" absolute top-1/2 -translate-y-1/2 w-full text-center text-xs text-blue-700 ",children:n})}),e(C,{m:0,className:"flex-none text-slate-500",children:"x"}),e("div",{children:e("div",{className:"line-clamp-2 text-sm break-words",children:t})})]}),o("span",{className:" pt-1 font-semibold text-sm",children:[e("span",{className:" font-normal text-xs",children:"\u0111"}),k(s*n)]})]}),Se=({store:r,type:a="standard",handleOnClick:t=()=>{},hasRightSide:s=!0,hasBorderBottom:n=!0,customRightSide:i,className:d})=>o("div",{className:q("flex flex-row items-center justify-between w-full",n&&" border-b",d&&d),onClick:t,role:"button",children:[o("div",{className:"flex flex-row items-center",children:[e("div",{className:"w-auto flex-none",children:e("img",{src:"https://mms.img.susercontent.com/25b7e43f3c5985a5773c430213155c4c",alt:"product",className:" w-9 h-9 object-cover rounded-full bg-white"})}),e("div",{className:" p-3 pr-0",children:e("div",{className:"line-clamp-2 text-sm font-medium break-words",children:"B\xE1ch H\xF3a S\u1EC9"})})]}),s&&(i||e(F,{size:20,icon:"zi-chevron-right",className:" text-zinc-500"}))]}),Ae=()=>{const{cart:r,store:a,setOpenProductPicker:t,setProductInfoPicked:s,fetchCart:n,storeId:i,cartId:d,fetchNewCart:m}=N(x=>x),[l,E]=h.exports.useState(""),p=Number(j(x=>x.template.shippingFee)),c=$(),u=O(),{totalQuantity:y,totalPrice:f}=h.exports.useMemo(()=>r.items.reduce((x,b)=>(x.totalQuantity+=1,x.totalPrice+=(b.product.price||0)*b.quantity,x),{totalQuantity:0,totalPrice:0}),[r.items]),H=async x=>{x.preventDefault();try{await ve(f)&&(await R("BANKING"),await m(i),c("/order-success"))}catch(b){console.error("Payment failed:",b)}},M=x=>{t(!0),s({productId:x,isUpdate:!0})},I=async x=>{x.preventDefault();try{await R("COD"),await m(i),c("/order-success")}catch(b){console.error("COD order failed:",b)}},R=async x=>{try{const b=await w.post("/orders",{storeId:i,cartId:d,payingMethod:x,deliveryTime:l});if(b.data.isSuccess)console.log("Order placed successfully:",b.data);else throw new Error(b.data.message)}catch(b){throw console.error("Error placing order:",b),b}},g=x=>{E(x.format("YYYY-MM-DDTHH:mm:ss.SSS[Z]"))};return h.exports.useEffect(()=>{u({title:"\u0110\u01A1n \u0111\u1EB7t h\xE0ng",type:"secondary"}),L("secondary"),n()},[]),o(D,{children:[r&&o("div",{className:"mb-[80px]",children:[e(C,{m:0,p:4,className:"bg-white",children:e(Se,{store:a,hasRightSide:!1,hasBorderBottom:!1,type:"order"})}),e(C,{mx:3,mb:2,children:r.items.map(x=>e(Pe,{pathImg:x.product.product.urlImage,nameProduct:x.product.product.name,salePrice:x.product.price,quantity:x.quantity,id:x.product.id,handleOnClick:b=>M(b)},x.id))}),o(C,{m:4,flex:!0,flexDirection:"row",justifyContent:"space-between",children:[e("span",{className:"text-base font-medium",children:"\u0110\u01A1n h\xE0ng"}),o("span",{className:"text-base font-medium text-primary",children:[k(f),"\u0111"]})]}),o(C,{m:0,px:4,className:"bg-white",children:[e(B,{size:"large",bold:!0,className:"border-b py-3 mb-0",children:"Th\u1EDDi gian giao h\xE0ng"}),e("div",{className:"py-3",children:e("div",{style:{border:"1px solid #d9d9d9",borderRadius:"2px"},children:e(te,{fullscreen:!1,onPanelChange:(x,b)=>{console.log(x.format("YYYY-MM-DD"),b),g(x)}})})})]}),p>0&&o(C,{m:4,flex:!0,flexDirection:"row",justifyContent:"space-between",children:[e("span",{className:"text-base font-medium",children:"Ph\xED ship"}),o("span",{className:"text-base font-medium text-primary",children:[k(p),"\u0111"]})]}),e(B,{className:"p-4 text-center",children:`\u0110\u1EB7t h\xE0ng \u0111\u1ED3ng ngh\u0129a v\u1EDBi vi\u1EC7c b\u1EA1n \u0111\u1ED3ng \xFD quan t\xE2m
              B\xE1ch H\xF3a S\u1EC9
              \u0111\u1EC3 nh\u1EADn tin t\u1EE9c m\u1EDBi`})]}),o(W,{zIndex:99,children:[e(v,{htmlType:"submit",fullWidth:!0,style:{marginBottom:"10px"},className:"bg-primary text-white rounded-lg h-12",onClick:I,children:"Thanh to\xE1n COD"}),e(v,{htmlType:"submit",fullWidth:!0,className:"bg-primary text-white rounded-lg h-12",onClick:H,children:"Thanh to\xE1n banking"})]})]})},_=()=>{const{openProductPicker:r,setOpenProductPicker:a,productInfoPicked:t,setProductInfoPicked:s,menu:n,cart:i,fetchCart:d,cartId:m,storeId:l}=N(g=>g),[E,p]=h.exports.useState(1),c=A(),u=h.exports.useMemo(()=>t.productId!==-1?n.find(g=>g.id===t.productId):null,[t.productId,n]),y=h.exports.useMemo(()=>u?i.items.find(g=>g.product.id===u.id):null,[u,i]);h.exports.useEffect(()=>{p(u&&y?y.quantity:1)},[u,y]);const f=h.exports.useCallback(()=>{a(!1),s({productId:-1,isUpdate:!1})},[a,s]),H=h.exports.useCallback(async()=>{if(!(!u||!m||!l))try{const g=await w.post("/carts",{cartProductMenuId:u.id,storeId:parseInt(l),cartId:parseInt(m),productId:u.id,quantity:E});g.data.isSuccess?(console.log("Th\xEAm v\xE0o gi\u1ECF h\xE0ng th\xE0nh c\xF4ng:",g.data),await d(),f()):console.error("L\u1ED7i khi th\xEAm v\xE0o gi\u1ECF h\xE0ng:",g.data.message)}catch(g){console.error("L\u1ED7i khi th\xEAm v\xE0o gi\u1ECF h\xE0ng:",g)}},[u,E,d,f,m,l]),M=h.exports.useCallback(async()=>{if(!(!u||!y||!m||!l))try{const g=await w.put("/carts/item",{cartProductMenuId:y.id,storeId:parseInt(l),cartId:parseInt(m),productId:u.id,quantity:E});g.data.isSuccess?(console.log("C\u1EADp nh\u1EADt gi\u1ECF h\xE0ng th\xE0nh c\xF4ng:",g.data),await d(),f()):console.error("L\u1ED7i khi c\u1EADp nh\u1EADt gi\u1ECF h\xE0ng:",g.data.message)}catch(g){console.error("L\u1ED7i khi c\u1EADp nh\u1EADt gi\u1ECF h\xE0ng:",g)}},[u,y,E,d,f,m,l]),I=h.exports.useCallback(async()=>{if(!(!y||!m||!l))try{const g=await w.delete("/carts/item",{data:{itemId:y.id,cartId:parseInt(m),storeId:parseInt(l)}});g.data.isSuccess?(console.log("X\xF3a s\u1EA3n ph\u1EA9m kh\u1ECFi gi\u1ECF h\xE0ng th\xE0nh c\xF4ng:",g.data),await d(),f()):console.error("L\u1ED7i khi x\xF3a s\u1EA3n ph\u1EA9m kh\u1ECFi gi\u1ECF h\xE0ng:",g.data.message)}catch(g){console.error("L\u1ED7i khi x\xF3a s\u1EA3n ph\u1EA9m kh\u1ECFi gi\u1ECF h\xE0ng:",g)}},[y,d,f,m,l]),R=h.exports.useCallback(()=>{c("/finish-order"),f()},[c,f]);return u?o(re,{visible:r,onClose:f,autoHeight:!0,mask:!0,handler:!0,swipeToClose:!0,children:[o("div",{className:"p-4",children:[o("div",{className:"flex items-center mb-4",children:[e("div",{className:"w-20 h-20 mr-4",children:e(Q,{src:u.product.urlImage,alt:u.product.name,ratio:1})}),o("div",{children:[e("h3",{className:"text-lg font-semibold mb-2",children:u.product.name}),o("p",{className:"text-primary font-semibold",children:["\u0111 ",k(u.price)]})]})]}),o("div",{className:"mb-4",children:[e("label",{className:"block mb-2",children:"S\u1ED1 l\u01B0\u1EE3ng:"}),e("input",{type:"number",value:E,onChange:g=>p(Number(g.target.value)),min:"1",className:"w-full p-2 border rounded"})]})]}),o(C,{m:0,flex:!0,justifyContent:"space-between",pb:4,children:[e("div",{className:"text-sm",children:"T\u1ED5ng ti\u1EC1n"}),o("div",{className:"text-lg font-medium text-primary",children:[k(E*u.price)," VN\u0110"]})]}),e(C,{m:4,flex:!0,justifyContent:"space-between",gap:2,children:t.isUpdate?o(S,{children:[e(v,{fullWidth:!0,className:"flex-1 bg-pink-100 text-red-500 border border-red-500",onClick:I,children:"X\xF3a s\u1EA3n ph\u1EA9m"}),e(v,{fullWidth:!0,className:"flex-1 bg-red-500 text-white",onClick:M,children:"C\u1EADp nh\u1EADt"})]}):o(S,{children:[e(v,{fullWidth:!0,className:"flex-1 bg-pink-100 text-red-500 border border-red-500",onClick:R,children:"Thanh to\xE1n"}),e(v,{fullWidth:!0,className:"flex-1 bg-red-500 text-white",onClick:H,children:"Th\xEAm v\xE0o gi\u1ECF"})]})})]}):null},Fe=({productId:r,pathImg:a,nameProduct:t,salePrice:s,retailPrice:n})=>{const{setOpenProductPicker:i,setProductInfoPicked:d}=N(E=>E),m=A(),l=()=>{i(!0),d({productId:r,isUpdate:!1})};return o("div",{className:"w-full flex flex-row items-center border border-[#E4E8EC] rounded-lg overflow-hidden h-24",role:"button",children:[e("div",{className:"w-24 flex-none",onClick:()=>{m(`/detail-product/${r}`)},children:e(Q,{src:a,alt:"image product",ratio:1})}),o("div",{className:" p-3 pr-0 flex-1",onClick:()=>{m(`/detail-product/${r}`)},children:[e("div",{className:"line-clamp-2 text-sm break-words",children:t}),o("span",{className:" pt-2 font-semibold text-sm text-primary",children:[e("span",{className:" font-normal text-xs text-primary",children:"\u0111 "}),k(s)]})]}),e(C,{mx:2,flex:!0,justifyContent:"center",alignItems:"center",className:"flex-none",children:e("div",{className:"w-6 h-6 rounded-full bg-primary flex justify-center items-center",onClick:l,role:"button",children:e(F,{icon:"zi-plus",size:16,className:"text-white"})})}),e(_,{})]})},De="4318657068771012646",Be=()=>o("div",{className:"flex flex-row justify-between items-center p-4 bg-white",children:[o("div",{className:"flex flex-row items-center",children:[e("img",{src:"https://mms.img.susercontent.com/25b7e43f3c5985a5773c430213155c4c",alt:"store-img",className:" rounded-full object-cover w-[60px] h-[60px]"}),o("div",{className:" pl-4",children:[e("div",{className:" text-base font-medium pb-1",children:"B\xE1ch H\xF3a S\u1EC9"}),e("div",{className:" text-sm font-normal text-gray-500 pb-1",children:"5000 theo d\xF5i"}),o("div",{className:" flex flex-row text-sm font-normal  text-gray-500",children:[e("div",{className:"flex items-center justify-center",children:e(F,{icon:"zi-location-solid",size:12})}),e("div",{className:" pl-1",children:"Qu\u1EADn 9"})]})]})]}),e(v,{className:"chat-button",variant:"primary",size:"small",style:{backgroundColor:"red"},onClick:()=>{const a=j(t=>t.template.oaIDtoOpenChat||"");ae({type:"oa",id:a||De})},children:"Nh\u1EAFn tin"})]}),Te=()=>{const{setMenu:r,menu:a,setSearchProduct:t,cart:s,fetchCart:n}=N(c=>c),i=$(),d=O(),m=h.exports.useCallback(c=>{t(c)},[t]),l=h.exports.useMemo(()=>e(T.Search,{placeholder:"T\xECm ki\u1EBFm s\u1EA3n ph\u1EA9m",onSearch:m,className:"cus-input-search"}),[m]);h.exports.useEffect(()=>{d({customTitle:j(u=>u.template.searchBar)?l:"",hasLeftIcon:!1,type:"secondary"}),L("secondary"),(async()=>{try{const u={page:0,size:10},y=await w.get(`/menu?page=${u.page}&size=${u.size}&storeId=${sessionStorage?.getItem("storeId")}`);y.data.isSuccess?(console.log("Data Products: ",y.data.data.content),r(y.data.data.content),console.log("Menu:",a)):console.error("L\u1ED7i khi l\u1EA5y danh s\xE1ch s\u1EA3n ph\u1EA9m:",y.data.message)}catch(u){console.error("L\u1ED7i khi l\u1EA5y danh s\xE1ch s\u1EA3n ph\u1EA9m:",u)}})(),n()},[d,l,r,n]);const{totalQuantity:E,totalPrice:p}=h.exports.useMemo(()=>s.items.reduce((c,u)=>(c.totalQuantity+=1,c.totalPrice+=(u.product.price||0)*u.quantity,c),{totalQuantity:0,totalPrice:0}),[s.items]);return e(D,{children:a&&a.length>0&&o(S,{children:[e("div",{className:"bg-primary",children:e(Be,{})}),e("div",{className:"bg-gray-100 h-3"}),e("div",{className:"bg-white p-3",style:{marginBottom:p>0?"120px":"0px"},children:a.map(c=>e("div",{className:"mb-2 w-full",children:e(Fe,{pathImg:c.product.urlImage,nameProduct:c.product.name,salePrice:c.price,retailPrice:c.product.basePrice,productId:c.id})},c.id))}),p>0&&o(S,{children:[e(Y,{quantity:E,totalPrice:p}),e(W,{listBtn:[{id:1,content:"Ho\xE0n t\u1EA5t \u0111\u01A1n h\xE0ng",type:"primary",onClick:()=>{i("/finish-order")},className:"bg-red-500 text-white"}],zIndex:99})]})]})})},ze=()=>{const r=$(),a=O();return h.exports.useEffect(()=>{a({title:"\u0110\u1EB7t h\xE0ng th\xE0nh c\xF4ng",hasLeftIcon:!1,type:"secondary"}),L("secondary")},[]),e(D,{children:e("div",{className:"flex flex-col items-center justify-center h-screen",children:e(C,{m:0,p:4,className:"bg-white rounded-lg shadow-md",children:o("div",{className:"flex flex-col items-center",children:[e(F,{icon:"zi-check-circle",size:64,className:"text-primary"}),e(B,{type:"h3",className:"mt-4 font-bold",children:"\u0110\u1EB7t h\xE0ng th\xE0nh c\xF4ng"}),e(B,{className:"mt-2 text-gray-500",children:"C\u1EA3m \u01A1n b\u1EA1n \u0111\xE3 tin t\u01B0\u1EDFng v\xE0 \u1EE7ng h\u1ED9 c\u1EEDa h\xE0ng c\u1EE7a ch\xFAng t\xF4i."}),e(v,{type:"primary",className:"mt-6",style:{backgroundColor:"red"},onClick:()=>{r("/menu")},fullWidth:!0,children:"Ti\u1EBFp t\u1EE5c mua s\u1EAFm"})]})})})})},Oe=()=>{const{email:r,setEmail:a,password:t,setPassword:s,setAccessToken:n,setStoreId:i,setIsLoggedIn:d,setCartId:m}=N(c=>c),l=A(),E=O(),p=h.exports.useCallback(async()=>{try{const c="84333336938",u=await se.hash(c,3),y="3368637342326461234",f=await w.post("/auth/zalo/login",{zaloId:y,hashPhone:u});f.data.isSuccess?(n(f.data.data.accessToken),i(f.data.data.storeId.toString()),d(!0),console.log(f.data.message),console.log(f.data.data),console.log(u),(async M=>{try{const I=await w.get(`/carts?storeId=${M}`,{headers:{Authorization:`Bearer ${f.data.data.accessToken}`}});I.data.isSuccess?(m(I.data.data.cartId),console.log("Get cart successfully:",I.data)):console.log("Error getting cart:",I.data.message)}catch(I){console.error("Error getting cart:",I)}})(f.data.data.storeId),l("/menu")):console.log(f.data.message)}catch(c){console.log("error:",c)}},[n,i,d,m,l]);return h.exports.useEffect(()=>{E({customTitle:"B\xE1ch H\xF3a S\u1EC9",hasLeftIcon:!1,type:"secondary"}),L("secondary")},[E]),o(D,{children:[e("div",{className:"bg-primary",children:e("div",{className:"p-4",children:e(B,{type:"h2",className:"text-center text-white font-bold",children:"\u0110\u0103ng nh\u1EADp"})})}),e("div",{className:"bg-white p-4",children:o("form",{onSubmit:p,children:[e("div",{className:"mb-4",children:e(T,{type:"email",placeholder:"Email",value:r,onChange:c=>a(c.target.value),className:"cus-input-search"})}),e("div",{className:"mb-4",children:e(T,{type:"password",placeholder:"M\u1EADt kh\u1EA9u",value:t,onChange:c=>s(c.target.value),className:"cus-input-search"})}),e(v,{type:"highlight",htmlType:"submit",className:"w-full",children:"\u0110\u0103ng nh\u1EADp"}),e("div",{className:"mt-4 text-center",children:e(v,{type:"highlight",onClick:p,className:"text-primary",children:"\u0110\u0103ng nh\u1EADp v\u1EDBi vai tr\xF2 store"})}),o("p",{className:"mt-4 text-center",children:["Ch\u01B0a c\xF3 t\xE0i kho\u1EA3n?"," ",e("a",{style:{color:"blue"},onClick:()=>l("/signup"),children:"\u0110\u0103ng k\xFD ngay!"})]})]})})]})},je=()=>{const{name:r,setName:a,location:t,setLocation:s,phoneNumber:n,setPhoneNumber:i}=N(p=>p),d=A(),m=O();h.exports.useEffect(()=>{a(""),s(""),i("")},[a,s,i]);const l=h.exports.useCallback(async p=>{p.preventDefault();const c=await w.post("/auth/zalo/signup",{name:r,location:t,phoneNumber:n,zaloId:"3398637342326461234"});c.data.isSuccess?(sessionStorage.setItem("accessToken",c.data.data["access-token"]),sessionStorage.setItem("storeId",c.data.data["store-id"].toString()),d("/menu")):console.log(c.data)},[r,t,n,d]),E=h.exports.useCallback(()=>{d("/")},[d]);return h.exports.useEffect(()=>{m({customTitle:"B\xE1ch H\xF3a S\u1EC9",hasLeftIcon:!1,type:"secondary"}),L("secondary")},[m]),o(D,{children:[e("div",{className:"bg-primary",children:e("div",{className:"p-4",children:e(B,{type:"h2",className:"text-center text-white font-bold",children:"\u0110\u0103ng k\xFD"})})}),e("div",{className:"bg-white p-4",children:o("form",{onSubmit:l,children:[e("div",{className:"mb-4",children:e(T,{type:"text",placeholder:"T\xEAn c\u1EEDa h\xE0ng",value:r,onChange:p=>a(p.target.value),className:"cus-input-search"})}),e("div",{className:"mb-4",children:e(T,{type:"text",placeholder:"\u0110\u1ECBa ch\u1EC9",value:t,onChange:p=>s(p.target.value),className:"cus-input-search"})}),e("div",{className:"mb-4",children:e(T,{type:"tel",placeholder:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i",value:n,onChange:p=>i(p.target.value),className:"cus-input-search"})}),e(v,{type:"highlight",htmlType:"submit",className:"w-full",children:"\u0110\u0103ng k\xFD"}),o("p",{className:"mt-4 text-center",children:["\u0110\xE3 c\xF3 t\xE0i kho\u1EA3n?"," ",e("a",{style:{color:"blue"},onClick:E,children:"\u0110\u0103ng nh\u1EADp ngay!"})]})]})})]})},Le={primary:{headerColor:"bg-primary",textColor:"text-white",iconColor:"text-white"},secondary:{headerColor:"bg-white",textColor:"text-black",iconColor:"text-gray-400"}},Me=()=>{const{header:r,setHeader:a}=N(u=>u),{route:t,hasLeftIcon:s,rightIcon:n,title:i,customTitle:d,type:m}=r,{headerColor:l,textColor:E,iconColor:p}=Le[m||"primary"],c=A();return e("div",{className:q("fixed top-0 z-50 w-screen h-header flex items-center",l,E),children:o("div",{className:" flex items-center h-[44px] pl-5 pr-[105px] gap-3 w-full justify-between",children:[o("div",{className:"flex flex-row items-center",children:[s&&e("span",{onClick:()=>c(t||-1),children:e(F,{icon:"zi-arrow-left",className:p})}),d||e("div",{className:"pl-2 text-lg font-medium",children:i})]}),n||" "]})})},U=({children:r})=>{const{isLoggedIn:a}=N(s=>s),t=$();return h.exports.useEffect(()=>{a||t("/")},[a,t]),a?r:null},He=()=>{const{setAccessToken:r,setStoreId:a,setIsLoggedIn:t,fetchCart:s}=N(n=>n);return h.exports.useEffect(()=>{const n=sessionStorage.getItem("accessToken"),i=sessionStorage.getItem("storeId");n&&i&&(r(n),a(i),t(!0),s(Number(i)))},[r,a,t,s]),e(Ne,{cssVariables:{"--zmp-primary-color":j(n=>n.template.primaryColor),"--zmp-primary-color-rgb":ye(j(n=>n.template.primaryColor))},children:e(ne,{children:e(h.exports.Suspense,{fallback:e("div",{className:"w-screen h-screen flex justify-center items-center",children:e(oe,{})}),children:e(ce,{children:o(le,{children:[e(Me,{}),o(ie,{children:[e(z,{path:"/",element:e(Oe,{})}),e(z,{path:"/signup",element:e(je,{})}),e(z,{path:"/menu",element:e(U,{children:e(Te,{})})}),e(z,{path:"/order-success",element:e(U,{children:e(ze,{})})}),e(z,{path:"/finish-order",element:e(U,{children:e(Ae,{})})}),e(z,{path:"/detail-product/:productId",element:e(U,{children:e(ke,{})})})]}),e(_,{})]})})})})})};window.APP_CONFIG||(window.APP_CONFIG=P);const Re=de(document.getElementById("app"));Re.render(ue.createElement(He));
